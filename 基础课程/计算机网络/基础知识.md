## IP数据报首部格式
![IP数据报格式](IP数据报格式.md)
IP数据报首部有固定的20B和可选的40B。

## 特殊IP地址
- 网络号全零，此时主机号一般也应全零，`0.0.0.0`表示任意网络，类似于通配符
- 网络号全1，此时主机号一般也应全1，`255.255.255.255`有限广播地址（不常见）
- 主机号全0，`192.168.1.0/24`表示网络地址
- 主机号全1，`192.168.1.255/24`表示该子网内的广播地址


工作在二层及一下的设备是没有IP地址的，例如二层交换机，它根据MAC地址转发数据包，而三层交换机，每一个网络接口都有一个IP地址。


```
Proto  Local Address     Foreign Address         State
tcp    127.0.0.1:8000    0.0.0.0:*               LISTEN
tcp    192.168.1.10:22   192.168.1.15:56789      ESTABLISHED
udp    0.0.0.0:68        0.0.0.0:*
```
- 第一行看似允许外部所有IP地址请求，但因为本地地址的特殊性，外部根本无法访问这个地址（回环地址），所以此行实质上只能监听到来自本机回环地址发往`127.0.0.1:8000`的请求
- 第二行表示`192.168.1.15:56789`已与本机`192.168.1.10:22`建立了连接
- 第三行监听外部任意地址发往本地任意地址的68端口的请求，udp是无连接的，所以State栏为空


```
tcp 0 80 172.24.200.6:22 36.142.55.128:29302 ESTABLISHED 
tcp 0 0  172.24.200.6:22 36.142.55.128:29480 ESTABLISHED 
tcp 0 0  172.24.200.6:22 36.142.55.128:29571 ESTABLISHED
```
TCP实现了多路复用技术，可以在一个端口上建立多个连接，每一个连接都使用四元组唯一标识：（源地址，源端口，目的地址，目的端口）。
#  查找与替换
1. **查找**：`/{pattern}`模式输入完毕后按`Enter`或`Esc`退出查找输入模式，接下来按`n` 查找符合模式的下一个字符串，按`N`查找符合模式的上一个字符串，除非重新输入模式串，否则已经输入的模式会保存，一直生效。
2. **替换：** `:[range]s/pattern/string/[g]` 
	- `[range]` 以行为单位，一个区间，例如：`2,5`表示\[2, 5]行
	- `pattern`为正则表达式
	- `string`为普通字符串
	- `[g]` 全区修饰符，生效后对一行内**所有**匹配到的字符串进行替换。
	- 严格意义上来说应该为 **批量替换**，即以每一行为一个字符串，而不是将整个文件内容作为一个字符串

>[!warning]
> `/(\w)/$$$1$/g`
> 将捕获的字符用`$`包围，引用捕获组时，使用了两次`$`.



# nvim 进入 diff 模式
``` shell
nvim -d file1.txt file2.txt
```

# 快速在行间跳转
- `:line_number` 按绝对行号跳转
- `:+ | - line_number` 按相对行号跳转
- `:percentage` 按百分比跳转
- `:m<tag>  :'<tag>` 按标记跳转。使用`m`做标记，使用`'`跳到指定标记所在的行

# 高亮指定单词
## match
```vimrc
match ErrorMsg /ERROR/
```
这样，`ERROR`将使用`ErrorMsg`高亮组的规则高亮，为红色背景。
match 只能生效一个，若有多个高亮模式，则应使用matchadd
## matchadd 
```vimrc
call matchadd('search', 'TODO')
call matchadd('ErrorMsg', 'error')
" 具体语法
" call matchadd(hlGroup, Pattern)
```

## 搜索高亮
此种方法不太完善
```vimrc
set hlsearch
```
首先要开启搜索高亮，之后搜到单词就高亮，但一旦改变`/`寄存器的内容，高亮单词也随之改变，所以不完善

## syntax
。。。使用自定义高亮组和syntax命令，但还不太清除，待补充


# 分屏
## 在缓冲区分屏
- 垂直分屏：`:vsplit [file]` or `:vsp [file]` or `<C-w> v`
- 水平分屏：`:split [file]` or `:sp [file]` or `<C-w> s`

## 启动时分屏
- 垂直分屏：`vim -On file1 file2 ...` 
- 水平分屏：`vim -on file1 file2 ...` 
其中，`n`是分屏个数，如果不指定，有多少个文件就分几个屏，如果指定，多出来的会打开新文件(unamed)。

## 屏幕相关的操作
1. 移动光标
`<C-w> k | j | h | l`
2. 移动屏幕
`<C-w> K | J | H | L`
3. 改变屏幕大小
	- `<C-w> +` 增加屏幕高度
	- `<C-w> -` 减小屏幕高度
	- `<C-w> >` 增加屏幕宽度
	- `<C-w> <`  减小屏幕宽度
	- `<C-w> =` 初始化所有屏幕的尺寸
4.  关闭屏幕
	- `<C-w> c` 关闭屏幕，最后一个除外
	- `<C-w> q` 关闭屏幕，最后一个也可以关闭


# 寄存器
## 寄存器类型
1. 匿名寄存器(`""`), 存储最后一次被操作的寄存器的内容。
2. 编号寄存器(`"0-9`)
3. 小删除寄存器 (`"-`),`x`命令默认的寄存器
4. 命名寄存器 (`"a-z`), 命名寄存器有 `"a` 到 `"z` 共 26 个，这些寄存器只有当我们指定时才会被使用。
5. 只读寄存器 (`":`, `".` `"%`)
	1. `.` 保存上一次在`Insert mode`下插入的内容
6. Buffer交替文件寄存器 (`"#`)
7. 表达式寄存器 (`"=`)
8. 选取和拖放寄存器(`"*` and `"+`)
9. 黑洞寄存器 (`"_`)
10. 搜索模式寄存器 (`"/`), 用于存储上一次搜索的关键词。
查看所有存在值的寄存器：`:register`

## 寄存器输出
1. Command-line mode: `<C-r> <reg>`
2. Normal mode: `"<reg><p>`
3. Command: `:put <reg>`

## 寄存器输入
1. Normal mode or Visual mode: `"<reg><y>`

>[!note] 
>先指定寄存器，再使用命令，那么此次命令将不使用默认寄存器，转而使用你指定的寄存器。例如：
>`"1x`
>这条命令将删除的内容存到编号寄存器`1`中，删除命令默认的寄存器是`-`.


## 命令的默认寄存器

| Command  | Register | Command | Register |
| :------: | :------: | :-----: | :------: |
| `y`, `p` |   `0`    |   `x`   |   `-`    |


# 宏命令
宏可以帮助我们完成一些重复性的动作。
## 录制
`q<reg>` 开始录制宏，保存在`<reg>`寄存器中。当在`recording @<reg>`，即录制中时，再次执行`q`命令，结束录制。

## 执行
- `@<reg>` 执行`<reg>`中的宏命令
- `<num>@<reg>`执行`<reg>`中的宏命令`<num>`次


# 折叠
## 手动折叠
```
zf[jk]
```
- `zf`是折叠命令
- `j` 或 `k` 是折叠导向符，表示从当前行开始，往哪边折叠。只要是能够移动贯标的命令都行。

`zf10j` 表示从当前行开始，往下折叠10行，包括当前行，将有11行被折叠为1行

- `zo` 在折叠行使用，表示打开折叠
- `zc` 在折叠范围内使用，表示关闭折叠

## 持久化折叠
- `mkview` 保存折叠信息
- `loadview` 加载折叠信息


# 大小写
1. **改变当前光标下的字符的大小写**
   - `~`：将光标下的字符从小写变为大写，如果已经是大写则变为小写。

2. **改变视觉选择（Visual mode）中文本的大小写**
   - 进入 Visual 模式（使用 `v` 进入字符模式，`V` 进入行模式，`Ctrl+v` 进入块模式），然后选择你想要改变的文本。
   - 然后，可以使用以下命令之一：
     - `U`：将选择的文本转换成大写。
     - `u`：在 Visual 模式下：将选择的文本转换成小写。注意，这与在普通模式下使用 `u` 来撤销上一次操作是不同的。
     - `~`：将选择的文本中的每个字符的大小写进行切换。

3. **改变当前行或指定范围内文本的大小写**
   - 无需进入 Visual 模式，可以直接使用以下命令之一，其中 `{motion}` 可以是如 `w`（下一个单词）、`$`（行尾）、`}`（下一个段落）等 Vim 移动命令：
     - `gu{motion}`：将 `{motion}` 指定的文本转换成小写。例如，`guw` 将光标下的单词转换成小写。
     - `gU{motion}`：将 `{motion}` 指定的文本转换成大写。例如，`gUw` 将光标下的单词转换成大写。
     - `g~~{motion}`：将 `{motion}` 指定的文本中的每个字符的大小写进行切换。例如，`g~~$` 将光标至行尾的所有字符的大小写进行切换。

4. **改变整个文件或特定范围内文本的大小写**
   - 对于整个文件，首先可以使用 `%`（表示整个文件范围）与上述命令结合，但更常见的做法是使用 `:` 进入 Ex 模式（命令行模式），然后使用以下命令之一：
     - `:%s/\<.\>/\L&/g`：将整个文件的所有单词转换成小写（注意，`\L` 是 Vim 的替换标志，用于将匹配到的文本转换为小写）。
     - `:%s/\<.\>/\U&/g`：将整个文件的所有单词转换成大写（`\U` 是转换为大写的标志）。
     - 你可以通过调整范围（如 `:%s/start/end/g` 中的 `start` 和 `end`）来限制这个操作到文件的特定部分。


# 全角符号替换
### 1. 使用 `:abbreviate`

`:abbreviate` 命令允许你定义缩写，当输入这些缩写时，Vim 会自动将它们扩展为完整的单词或符号序列。这对于将某个符号映射为另一个符号很有用。

```vim
:abbreviate foo bar
```

上面的命令会将输入的 `foo` 替换为 `bar`。但请注意，这个替换是在插入模式下，并且只有在 Vim 识别出完整的缩写后才会进行替换（即，在输入缩写后按空格、标点或其他非单词字符时）。

### 2. 使用 `:imap` 或 `:inoremap` 进行即时映射

虽然这不是直接替换字符，但你可以使用插入模式下的映射（`:imap` 或 `:inoremap`）来在输入特定字符时插入另一个字符。然而，这需要你按下特定的键序列来触发映射，而不是简单地替换文本中的字符。

```vim
:inoremap ; :
```

这个命令会在你尝试在插入模式下输入 `;` 时自动替换为 `:`。

### 3. 使用 Vim 脚本或插件进行文本替换

如果你需要在文本中自动替换多个特定的符号或字符串，编写一个简单的 Vim 脚本或使用现有的插件（如 `vim-autoformat`、`vim-textobj-user` 加上自定义的文本对象等）可能是更好的选择。这些工具提供了更复杂的文本处理功能，包括在保存文件时自动运行替换命令等。

### 4. 使用 Vim 的替换命令

如果你只是偶尔需要替换文件中的某些字符或符号，可以使用 Vim 的 `:substitute` 命令（简写为 `:s`）。

```vim
:%s/源符号/目标符号/g
```

这个命令会在整个文件中查找 `源符号` 并将其替换为 `目标符号`。`g` 标志表示全局替换，即替换行中的每一个匹配项。

